language: python
python:
  - "3.5"
  - "3.6"
install:
  - sudo apt-get update
  # For gym
  - sudo apt-get install swig
  - wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
  - bash miniconda.sh -b -p $HOME/miniconda
  - export PATH="$HOME/miniconda/bin:$PATH"
  - hash -r
  - conda config --set always_yes yes --set changeps1 no
  - conda update -q conda
  # Useful for debugging any issues with conda
  - conda info -a

  - conda env create -f environment.yml
  - source activate torchrl
  - pip install -e .

addons:
  sonarcloud:
    organization: lgvaz-github
    token:
      secure: LFqhGTJQTuicO0z9JNq3YGeAIHyaV2xTLAcUbeS7y7ZzfYgPfOLzbyVEV59fGT0wX+fqpZYMktkRmxpQ1gpYKScTIJwzhxA/1vHvnwTg95vuXK2zbwhb3M8eL/Moiq9LHSAyGn812nUIKHokcY29q+eyFO1g1dIICKJlozzfmeRcyIRznMwzfegDv1MbNpXSKjvDsVq8kt4Mt8AkK7LZ8/Ad/5RzNNYgRU80Z6HuiOwDp16TnCg1cF+WpYVjzZBTdnZsAV/PbVJ43rPQnfmcCAjZ0h31+W+jp2Q6DQc62/2kKTHHtVGuFqsITTVEBnSdKIEyVwQCXt77M086Svo6XoGLveBjzuoiDIpTBZ7ed29iQcakROND19gPuVURF/ZFnk/+4YwaG5L/L15c6YqvgZhZmib9dPczPHKfwPFyPcvHKsL7FMlKmzElVzM6XFg+tmnEOPWYmoppDq4ZjPEvPT40MlB+G71I3HvbJXxQPgXKg2935ZMinzT6xn3gLMXxUh3krrMAUK76a+po23fHSEyPII411JZeg+1Sb1qhtLHhZM70lZ4VRtU0atOma9jR6UdWSST+Onr9XDYaKciM9fqSSH2TBO5GyTpT1tdOVceLWdeWP2ZK1hjnlUOC86Ai95GzlzJxyHM57nECN8Wvn1Nvkg0wFK3zkN7AtuNonJo=

script:
  python -m unittest discover

notifications:
  email:
    on_success: never
    on_failure: always

cache:
  directories:
    $HOME/.m2/repository
    $HOME/.sonar/cache
    $HOME/.gradle
    .gradle
